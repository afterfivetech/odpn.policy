<?xml version="1.0"?>
<contentrules>
 <rule name="rule-1" title="Send Email to Topic Owner" cascading="False"
    description="Send Email to Topic Owner"
    enabled="True" event="zope.lifecycleevent.interfaces.IObjectAddedEvent"
    stop-after="False">
    <conditions>
            <condition type="plone.conditions.PortalType">
                <property name="check_types">
                    <element>odpn.profile.registration</element>
                </property>
    </condition>
    </conditions>
  <actions>
   <action type="collective.easytemplate.actions.Mail">
    <property name="source"/>
    <property
       name="message">A member just registered to an event. To check the details please visit:
     
     {{ context.absolute_url() }}     
     
     -------------------------
     ODPN Portal
     http://www.odpn.com</property>
    <property name="recipients">{{ context.question_creator }}</property>
    <property
       name="subject">New ODPN Event Registration</property>
   </action>
   <action type="collective.easytemplate.actions.Mail">
    <property name="source"/>
    <property
       name="message">We have received your request to attend the ${parent_title}, we will review your request and confirm your reservation soon. You may view the details below:
     
     {{ context.absolute_url() }}
     
     If you find that there are errors to your registration, please email info@odpn.org
     
     -------------------------
     ODPN Portal
     http://www.odpn.com</property>
    <property name="recipients">{{ context.question_creator }}</property>
    <property name="subject">ODPN Registration Received</property>
   </action>
  </actions>
 </rule>
</contentrules>
